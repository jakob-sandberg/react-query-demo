# Workshop onsdag 1/9

Skapa 칛nnu en tj칛nst och komponenter f칬r att interagera med "Official Joke API" som ger oss slumpm칛ssiga sk칛mt av tre olika typer.

Man ska kunna f친 ett slumpm칛ssigt sk칛mt oavsett typ, men 칛ven kunna h칛mta slumpm칛ssiga sk칛mt av en specifik typ (general, knock-knock eller programming).

## Offical Joke API

Svaren kommer som JSON och ni g칬r vanliga HTTP GET requests till API:et p친 `https://official-joke-api.appspot.com`, ingen API-nyckel eller header beh칬vs.

De tre olika typerna av sk칛mt som finns i API:et 칛r:

- `general`
- `knock-knock`
- `programming`

F칬ljande endpoints finns:

### `/jokes/random`

H칛mtar ett slumpm칛ssigt sk칛mt ifr친n alla tre typer.

Svaret som kommer tillbaka ser ut s친h칛r:

```json
{
  "id": 197,
  "type": "general",
  "setup": "What did the Zen Buddist say to the hotdog vendor?",
  "punchline": "Make me one with everything."
}
```

### `/jokes/:type/random`

H칛mtar ett slumpm칛ssigt sk칛mt av den specificerade typen (t.ex. `/jokes/programming/random`).

Svaret som kommer tillbaka ser ut s친h칛r:

```json
[
  {
    "id": 12,
    "type": "knock-knock",
    "setup": "Knock knock. \n Who's there? \n A broken pencil. \n A broken pencil who?",
    "punchline": "Never mind. It's pointless."
  }
]
```

## Uppgifter

### Uppgift 1

Skapa en service f칬r API:et och en metod f칬r att h칛mta ett slumpm칛ssigt sk칛mt. L칛gg till l칛mplig route och skapa en komponent f칬r att h칛mta ut och visa sk칛mtet.

L칛gg 칛ven till en knapp under sk칛mtet, som h칛mtar ut ett nytt sk칛mt utan att man beh칬ver l칛mna sidan.

## Uppgift 2

Skapa metoder i din API-service f칬r att h칛mta ut sk칛mt av en specifik typ (se vilka typer som finns ovan). L칛gg d칛refter till l칛mpliga routes och komponenter f칬r att h칛mta ut och visa sk칛mt ifr친n varje specifik typ.

(Allts친 en komponent f칬r sk칛mt av typen `general`, en f칬r `knock-knock` och en f칬r `programming` sk칛mt.)

## Uppgift 3

Troligen uppepar du all din fetch-kod i din API-service, och det 칛r ju inte DRY (Don't Repeat Yourself). Refaktorera bums s친 dina metoder anropar en gemensam `get`-metod som tar emot vilken endpoint som ska h칛mtas ist칛llet.

Ex. `get('/jokes/random')` och `get('/jokes/programming/random')`.

## Uppgift 4

Nu b칬rjar allt se bra ut 游눩游낕. Men 칛r det inte lite dumt att ha fyra olika komponenter f칬r samma API?

Se om du kan g칬ra en `RandomJoke`-komponent, som ist칛llet tar emot vilken typ av sk칛mt som ska h칛mtas som en prop (ex. `<RandomJoke type="programming">`), och i den komponenten s친 skickar du med detta till din API-service.

Du kommer troligen beh칬va skapa en `getJoke(type)` metod i din API-service, och anropa den ifr친n din `<RandomJoke>`-komponent d칛r du anv칛nder `useQuery()`.

Tips! Kolla p친 "Query Function Variables" i React Query's dokumentation: <https://react-query.tanstack.com/guides/query-functions#query-function-variables>
